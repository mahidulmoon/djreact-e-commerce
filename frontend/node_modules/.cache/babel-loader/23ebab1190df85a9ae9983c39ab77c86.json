{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\M4h1DuL MooN\\\\fullstackweb\\\\E-commerce\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:\\\\Users\\\\M4h1DuL MooN\\\\fullstackweb\\\\E-commerce\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\M4h1DuL MooN\\\\fullstackweb\\\\E-commerce\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\M4h1DuL MooN\\\\fullstackweb\\\\E-commerce\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\M4h1DuL MooN\\\\fullstackweb\\\\E-commerce\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Redirect,Link}from'react-router-dom';import axios from'axios';var CategoryDashBoard=/*#__PURE__*/function(_Component){_inherits(CategoryDashBoard,_Component);var _super=_createSuper(CategoryDashBoard);function CategoryDashBoard(){var _this;_classCallCheck(this,CategoryDashBoard);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={allproducts:[],isObject:false,cartitems:[]};_this.addtochart=function(e,product){//e.preventDefault();\n_this.setState(function(state){var cartitems=_this.state.cartitems;var productisalreadyincart=false;cartitems.forEach(function(item){if(item.id===product.id){productisalreadyincart=true;item.count++;}});if(!productisalreadyincart){cartitems.push(_objectSpread(_objectSpread({},product),{},{count:1}));}localStorage.setItem(\"cartitems\",JSON.stringify(cartitems));});//console.log(\"click\");\n};_this.getproducts=function(){axios.get(_this.props.location.passlink.link).then(function(response){return _this.setState({allproducts:response.data});});};return _this;}_createClass(CategoryDashBoard,[{key:\"componentDidMount\",value:function componentDidMount(){if(this.props.location.passlink){this.setState({isObject:true});this.getproducts();}else{alert(\"Go back to home\");//return <Redirect to='/' />\n}if(localStorage.getItem('cartitems')){this.setState({cartitems:JSON.parse(localStorage.getItem('cartitems'))});}}// addtochart = (e,productname) =>{\n//     //e.preventDefault();\n//     this.setState(state =>{\n//         const cartitems = this.state.cartitems;\n//         let productisalreadyincart = false;\n//         cartitems.push( productname );\n//         localStorage.setItem(\"cartitems\",cartitems);\n//     })\n//     //console.log(\"click\");\n// }\n},{key:\"render\",value:function render(){var _this2=this;// if(this.state.isObject === false){\n//     return <Redirect to='/' />\n// }\nreturn/*#__PURE__*/React.createElement(\"div\",null,this.state.isObject&&/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",null,this.props.location.passlink.name),this.state.allproducts.map(function(product){return/*#__PURE__*/React.createElement(\"div\",{className:\"catagorybox\"},\" \",/*#__PURE__*/React.createElement(\"div\",{className:\"categorydiv\"},/*#__PURE__*/React.createElement(\"p\",null,product.name),/*#__PURE__*/React.createElement(Link,{to:{pathname:'/productdetails',passlink:{id:product.id,link:_this2.props.location.passlink.link,name:_this2.props.location.passlink.name}}},/*#__PURE__*/React.createElement(\"img\",{src:product.imagefield})),/*#__PURE__*/React.createElement(\"p\",null,\"Available: \",product.quantity),/*#__PURE__*/React.createElement(\"p\",null,\"Price: \",product.price),/*#__PURE__*/React.createElement(\"button\",{className:\"button\",onClick:function onClick(e){return _this2.addtochart(e,product);}},\"Add to cart\")));})));}}]);return CategoryDashBoard;}(Component);export default CategoryDashBoard;","map":{"version":3,"sources":["C:/Users/M4h1DuL MooN/fullstackweb/E-commerce/frontend/src/Components/CategoryDashBoard.js"],"names":["React","Component","Redirect","Link","axios","CategoryDashBoard","state","allproducts","isObject","cartitems","addtochart","e","product","setState","productisalreadyincart","forEach","item","id","count","push","localStorage","setItem","JSON","stringify","getproducts","get","props","location","passlink","link","then","response","data","alert","getItem","parse","name","map","pathname","imagefield","quantity","price"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Redirect,Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nclass CategoryDashBoard extends Component {\r\n\r\n    state = {\r\n        allproducts:[],\r\n        isObject: false,\r\n        cartitems:[],\r\n    }\r\n    componentDidMount(){\r\n        if(this.props.location.passlink){\r\n            this.setState({ isObject: true });\r\n            this.getproducts();\r\n        }else{\r\n            alert(\"Go back to home\");\r\n            //return <Redirect to='/' />\r\n        }\r\n        if(localStorage.getItem('cartitems')){\r\n            this.setState({ cartitems: JSON.parse(localStorage.getItem('cartitems')) });\r\n        }\r\n    }\r\n    // addtochart = (e,productname) =>{\r\n    //     //e.preventDefault();\r\n    //     this.setState(state =>{\r\n    //         const cartitems = this.state.cartitems;\r\n    //         let productisalreadyincart = false;\r\n    //         cartitems.push( productname );\r\n    //         localStorage.setItem(\"cartitems\",cartitems);\r\n    //     })\r\n    //     //console.log(\"click\");\r\n    // }\r\n    addtochart = (e,product) =>{\r\n        //e.preventDefault();\r\n        this.setState(state =>{\r\n            const cartitems = this.state.cartitems;\r\n            let productisalreadyincart = false;\r\n            cartitems.forEach(item =>{\r\n                if(item.id === product.id){\r\n                    productisalreadyincart = true;\r\n                    item.count++;\r\n                }\r\n            });\r\n            if(!productisalreadyincart){\r\n                cartitems.push({...product,count:1});\r\n            }\r\n            localStorage.setItem(\"cartitems\",JSON.stringify(cartitems));\r\n        })\r\n        //console.log(\"click\");\r\n    }\r\n\r\n    getproducts= () =>{\r\n        axios.get(this.props.location.passlink.link).then(response => this.setState({ allproducts:response.data }))\r\n    }\r\n    render() {\r\n        // if(this.state.isObject === false){\r\n        //     return <Redirect to='/' />\r\n        // }\r\n        return (\r\n            <div>\r\n                { this.state.isObject && <div><h1>{this.props.location.passlink.name}</h1>\r\n                { this.state.allproducts.map(product =>(<div className=\"catagorybox\"> <div className=\"categorydiv\">\r\n                            <p>{product.name}</p>\r\n                            <Link to={{ pathname: '/productdetails', passlink:{ id:product.id,link:this.props.location.passlink.link,name:this.props.location.passlink.name } }}><img src={product.imagefield} /></Link>\r\n                            <p>Available: {product.quantity}</p>\r\n                            <p>Price: {product.price}</p>\r\n                            <button className=\"button\" onClick={e => this.addtochart(e, product)}>Add to cart</button>\r\n                            \r\n                        </div></div>))  }</div> }\r\n                \r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default CategoryDashBoard\r\n"]},"metadata":{},"sourceType":"module"}